"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery||Zepto)}(function(e){var a=function(a,t,n){var r={invalid:[],getCaret:function(){try{var e,t=0,n=a.get(0),o=document.selection,s=n.selectionStart;return o&&navigator.appVersion.indexOf("MSIE 10")===-1?(e=o.createRange(),e.moveStart("character",-r.val().length),t=e.text.length):(s||"0"===s)&&(t=s),t}catch(e){}},setCaret:function(e){try{if(a.is(":focus")){var t,n=a.get(0);n.setSelectionRange?(n.focus(),n.setSelectionRange(e,e)):(t=n.createTextRange(),t.collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select())}}catch(e){}},events:function(){a.on("keydown.mask",function(e){a.data("mask-keycode",e.keyCode||e.which)}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){a.keydown().keyup()},100)}).on("change.mask",function(){a.data("changed",!0)}).on("blur.mask",function(){i===r.val()||a.data("changed")||a.trigger("change"),a.data("changed",!1)}).on("blur.mask",function(){i=r.val()}).on("focus.mask",function(a){n.selectOnFocus===!0&&e(a.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!o.test(r.val())&&r.val("")})},getRegexMask:function(){for(var e,a,n,r,o,i,c=[],l=0;l<t.length;l++)e=s.translation[t.charAt(l)],e?(a=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,r=e.recursive,r?(c.push(t.charAt(l)),o={digit:t.charAt(l),pattern:a}):c.push(n||r?a+"?":a)):c.push(t.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=c.join(""),o&&(i=i.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(i)},destroyEvents:function(){a.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var t,n=a.is("input"),r=n?"val":"text";return arguments.length>0?(a[r]()!==e&&a[r](e),t=a):t=a[r](),t},getMCharsBeforeCount:function(e,a){for(var n=0,r=0,o=t.length;r<o&&r<e;r++)s.translation[t.charAt(r)]||(e=a?e+1:e,n++);return n},caretPos:function(e,a,n,o){var i=s.translation[t.charAt(Math.min(e-1,t.length-1))];return i?Math.min(e+n-a-o,n):r.caretPos(e+1,a,n,o)},behaviour:function(t){t=t||window.event,r.invalid=[];var n=a.data("mask-keycode");if(e.inArray(n,s.byPassKeys)===-1){var o=r.getCaret(),i=r.val(),c=i.length,l=r.getMasked(),u=l.length,d=r.getMCharsBeforeCount(u-1)-r.getMCharsBeforeCount(c-1),v=o<c;return r.val(l),v&&(8!==n&&46!==n&&(o=r.caretPos(o,c,u,d)),r.setCaret(o)),r.callbacks(t)}},getMasked:function(e,a){var o,i,c=[],l=void 0===a?r.val():a+"",u=0,d=t.length,v=0,h=l.length,m=1,f="push",p=-1;for(n.reverse?(f="unshift",m=-1,o=0,u=d-1,v=h-1,i=function(){return u>-1&&v>-1}):(o=d-1,i=function(){return u<d&&v<h});i();){var k=t.charAt(u),g=l.charAt(v),M=s.translation[k];M?(g.match(M.pattern)?(c[f](g),M.recursive&&(p===-1?p=u:u===o&&(u=p-m),o===p&&(u-=m)),u+=m):M.optional?(u+=m,v-=m):M.fallback?(c[f](M.fallback),u+=m,v-=m):r.invalid.push({p:v,v:g,e:M.pattern}),v+=m):(e||c[f](k),g===k&&(v+=m),u+=m)}var b=t.charAt(o);return d!==h+1||s.translation[b]||c.push(b),c.join("")},callbacks:function(e){var o=r.val(),s=o!==i,c=[o,e,a,n],l=function(e,a,t){"function"==typeof n[e]&&a&&n[e].apply(this,t)};l("onChange",s===!0,c),l("onKeyPress",s===!0,c),l("onComplete",o.length===t.length,c),l("onInvalid",r.invalid.length>0,[o,e,a,r.invalid,n])}};a=e(a);var o,s=this,i=r.val();t="function"==typeof t?t(r.val(),void 0,a,n):t,s.mask=t,s.options=n,s.remove=function(){var e=r.getCaret();return r.destroyEvents(),r.val(s.getCleanVal()),r.setCaret(e-r.getMCharsBeforeCount(e)),a},s.getCleanVal=function(){return r.getMasked(!0)},s.getMaskedVal=function(e){return r.getMasked(!1,e)},s.init=function(t){if(t=t||!1,n=n||{},s.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,s.byPassKeys=e.jMaskGlobals.byPassKeys,s.translation=e.extend({},e.jMaskGlobals.translation,n.translation),s=e.extend(!0,{},s,n),o=r.getRegexMask(),t===!1){n.placeholder&&a.attr("placeholder",n.placeholder),a.data("mask")&&a.attr("autocomplete","off"),r.destroyEvents(),r.events();var i=r.getCaret();r.val(r.getMasked()),r.setCaret(i+r.getMCharsBeforeCount(i,!0))}else r.events(),r.val(r.getMasked())},s.init(!a.is("input"))};e.maskWatchers={};var t=function(){var t=e(this),r={},o="data-mask-",s=t.attr("data-mask");if(t.attr(o+"reverse")&&(r.reverse=!0),t.attr(o+"clearifnotmatch")&&(r.clearIfNotMatch=!0),"true"===t.attr(o+"selectonfocus")&&(r.selectOnFocus=!0),n(t,s,r))return t.data("mask",new a(this,s,r))},n=function(a,t,n){n=n||{};var r=e(a).data("mask"),o=JSON.stringify,s=e(a).val()||e(a).text();try{return"function"==typeof t&&(t=t(s)),"object"!=typeof r||o(r.options)!==o(n)||r.mask!==t}catch(e){}},r=function(e){var a,t=document.createElement("div");return e="on"+e,a=e in t,a||(t.setAttribute(e,"return;"),a="function"==typeof t[e]),t=null,a};e.fn.mask=function(t,r){r=r||{};var o=this.selector,s=e.jMaskGlobals,i=s.watchInterval,c=r.watchInputs||s.watchInputs,l=function(){if(n(this,t,r))return e(this).data("mask",new a(this,t,r))};return e(this).each(l),o&&""!==o&&c&&(clearInterval(e.maskWatchers[o]),e.maskWatchers[o]=setInterval(function(){e(document).find(o).each(l)},i)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var a=e(this).data("mask");a&&a.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(a){a=a||e.jMaskGlobals.maskElements;var n=a instanceof e?a:e(a);n.filter(e.jMaskGlobals.dataMaskAttr).each(t)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:r("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},o=e.jMaskGlobals=e.extend(!0,{},o,e.jMaskGlobals),o.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},o.watchInterval)}),$(function(){searchZipcode("#cep_entrega","#endereco_entrega","#cidade_entrega","#estado_entrega","#complemento_entrega","#complemento_entrega"),searchZipcode("#cep_solicitante","#endereco_solicitante","#cidade_solicitante","#estado_solicitante","#complemento_solicitante","#complemento_solicitante"),initMasks(),$("#check_same_address").on("click",function(){var e=$("#can-disable-by-checkbox");e.hasClass("disabled")?(e.removeClass("disabled"),$("#cep_entrega, #endereco_entrega, #cidade_entrega, #estado_entrega, #complemento_entrega").removeAttr("disabled")):(e.addClass("disabled"),$("#cep_entrega, #endereco_entrega, #cidade_entrega, #estado_entrega, #complemento_entrega").attr("disabled","disabled"))}),initNewInsuranceFormEvent(),$("#modal-form-show").on("click",function(e){e.preventDefault()}),$("#task-form").on("submit",function(e){e.preventDefault(),$(".required").each(function(e,a){$(this).addClass("has-error");var t=$(this).attr("id");$("#"+t+"_invalido").html("Campo Obrigatório")})}),$(".required").on("blur",function(){var e=$(this);""==e.val()?e.addClass("has-error"):e.removeClass("has-error")})});var searchZipcode=function(e,a,t,n,r,o){$(e).on("blur",function(){var s=$(e);if(s.val().length>=8){var i="https://viacep.com.br/ws/"+s.val()+"/json/";$.get(i,function(e){$(a).val(e.logradouro),$(t).val(e.localidade),$(n).val(e.uf),$(r).val(e.complemento),$(o).focus(),console.log(e)})}})},initMasks=function(){$("#cep_entrega, #cep_solicitante").mask("00000-000",{clearIfNotMatch:!0}),$("#cpf_solicitante").mask("000.000.000-00",{clearIfNotMatch:!0}),$("#telefone_solicitante").mask("(00) 0000-00009",{clearIfNotMatch:!0})},initNewInsuranceFormEvent=function(){$("#add-new-insurance").on("click",function(e){var a=$("#marca_insumo"),t=$("#preco_insumo"),n=$("#quantidade_insumo"),r=$("#descricao_insumo"),o=!1;if(validateLength(a.val(),2,50)||(a.addClass("has-error"),$("#marca_insumo_invalido").html("Preencha o campo com no mínimo 2 caracteres e no máximo 50"),o=!0),validateNumber(t.val())||(t.addClass("has-error"),$("#preco_insumo_invalido").html("Número inválido"),o=!0),validateInt(n.val())||(n.addClass("has-error"),$("#quantidade_insumo_invalido").html("Número inválido"),o=!0),validateLength(r.val(),3,255)||(r.addClass("has-error"),$("#descricao_insumo_invalido").html("Preencha o campo com no mínimo 3 caracteres e no máximo 255"),o=!0),!o){var s="";s+=createElement("td",a.val()),s+=createElement("td",t.val()),s+=createElement("td",n.val()),s+=createElement("td",r.val());var i=createElement("tr",s);return $("#can-add-insurance").append(i),$("#new-insurance-modal .close").click(),a.val(""),t.val(""),n.val(""),r.val(""),!0}return!1})},validateLength=function(e,a,t){var n=e.length;return n>=a&&!(t&&n>t)},validateInt=function(e){return e=Number(e),e>0&&e===parseInt(e,10)},validateNumber=function(e){return e=Number(e),e>0&&!isNaN(parseFloat(e))&&isFinite(e)};