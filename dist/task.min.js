"use strict";!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery||Zepto)}(function(a){var e=function(e,t,n){var r={invalid:[],getCaret:function(){try{var a,t=0,n=e.get(0),o=document.selection,s=n.selectionStart;return o&&navigator.appVersion.indexOf("MSIE 10")===-1?(a=o.createRange(),a.moveStart("character",-r.val().length),t=a.text.length):(s||"0"===s)&&(t=s),t}catch(a){}},setCaret:function(a){try{if(e.is(":focus")){var t,n=e.get(0);n.setSelectionRange?(n.focus(),n.setSelectionRange(a,a)):(t=n.createTextRange(),t.collapse(!0),t.moveEnd("character",a),t.moveStart("character",a),t.select())}}catch(a){}},events:function(){e.on("keydown.mask",function(a){e.data("mask-keycode",a.keyCode||a.which)}).on(a.jMaskGlobals.useInput?"input.mask":"keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){i===r.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){i=r.val()}).on("focus.mask",function(e){n.selectOnFocus===!0&&a(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!o.test(r.val())&&r.val("")})},getRegexMask:function(){for(var a,e,n,r,o,i,c=[],l=0;l<t.length;l++)a=s.translation[t.charAt(l)],a?(e=a.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=a.optional,r=a.recursive,r?(c.push(t.charAt(l)),o={digit:t.charAt(l),pattern:e}):c.push(n||r?e+"?":e)):c.push(t.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=c.join(""),o&&(i=i.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(i)},destroyEvents:function(){e.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(a){var t,n=e.is("input"),r=n?"val":"text";return arguments.length>0?(e[r]()!==a&&e[r](a),t=e):t=e[r](),t},getMCharsBeforeCount:function(a,e){for(var n=0,r=0,o=t.length;r<o&&r<a;r++)s.translation[t.charAt(r)]||(a=e?a+1:a,n++);return n},caretPos:function(a,e,n,o){var i=s.translation[t.charAt(Math.min(a-1,t.length-1))];return i?Math.min(a+n-e-o,n):r.caretPos(a+1,e,n,o)},behaviour:function(t){t=t||window.event,r.invalid=[];var n=e.data("mask-keycode");if(a.inArray(n,s.byPassKeys)===-1){var o=r.getCaret(),i=r.val(),c=i.length,l=r.getMasked(),d=l.length,u=r.getMCharsBeforeCount(d-1)-r.getMCharsBeforeCount(c-1),v=o<c;return r.val(l),v&&(8!==n&&46!==n&&(o=r.caretPos(o,c,d,u)),r.setCaret(o)),r.callbacks(t)}},getMasked:function(a,e){var o,i,c=[],l=void 0===e?r.val():e+"",d=0,u=t.length,v=0,h=l.length,m=1,f="push",p=-1;for(n.reverse?(f="unshift",m=-1,o=0,d=u-1,v=h-1,i=function(){return d>-1&&v>-1}):(o=u-1,i=function(){return d<u&&v<h});i();){var k=t.charAt(d),g=l.charAt(v),M=s.translation[k];M?(g.match(M.pattern)?(c[f](g),M.recursive&&(p===-1?p=d:d===o&&(d=p-m),o===p&&(d-=m)),d+=m):M.optional?(d+=m,v-=m):M.fallback?(c[f](M.fallback),d+=m,v-=m):r.invalid.push({p:v,v:g,e:M.pattern}),v+=m):(a||c[f](k),g===k&&(v+=m),d+=m)}var b=t.charAt(o);return u!==h+1||s.translation[b]||c.push(b),c.join("")},callbacks:function(a){var o=r.val(),s=o!==i,c=[o,a,e,n],l=function(a,e,t){"function"==typeof n[a]&&e&&n[a].apply(this,t)};l("onChange",s===!0,c),l("onKeyPress",s===!0,c),l("onComplete",o.length===t.length,c),l("onInvalid",r.invalid.length>0,[o,a,e,r.invalid,n])}};e=a(e);var o,s=this,i=r.val();t="function"==typeof t?t(r.val(),void 0,e,n):t,s.mask=t,s.options=n,s.remove=function(){var a=r.getCaret();return r.destroyEvents(),r.val(s.getCleanVal()),r.setCaret(a-r.getMCharsBeforeCount(a)),e},s.getCleanVal=function(){return r.getMasked(!0)},s.getMaskedVal=function(a){return r.getMasked(!1,a)},s.init=function(t){if(t=t||!1,n=n||{},s.clearIfNotMatch=a.jMaskGlobals.clearIfNotMatch,s.byPassKeys=a.jMaskGlobals.byPassKeys,s.translation=a.extend({},a.jMaskGlobals.translation,n.translation),s=a.extend(!0,{},s,n),o=r.getRegexMask(),t===!1){n.placeholder&&e.attr("placeholder",n.placeholder),e.data("mask")&&e.attr("autocomplete","off"),r.destroyEvents(),r.events();var i=r.getCaret();r.val(r.getMasked()),r.setCaret(i+r.getMCharsBeforeCount(i,!0))}else r.events(),r.val(r.getMasked())},s.init(!e.is("input"))};a.maskWatchers={};var t=function(){var t=a(this),r={},o="data-mask-",s=t.attr("data-mask");if(t.attr(o+"reverse")&&(r.reverse=!0),t.attr(o+"clearifnotmatch")&&(r.clearIfNotMatch=!0),"true"===t.attr(o+"selectonfocus")&&(r.selectOnFocus=!0),n(t,s,r))return t.data("mask",new e(this,s,r))},n=function(e,t,n){n=n||{};var r=a(e).data("mask"),o=JSON.stringify,s=a(e).val()||a(e).text();try{return"function"==typeof t&&(t=t(s)),"object"!=typeof r||o(r.options)!==o(n)||r.mask!==t}catch(a){}},r=function(a){var e,t=document.createElement("div");return a="on"+a,e=a in t,e||(t.setAttribute(a,"return;"),e="function"==typeof t[a]),t=null,e};a.fn.mask=function(t,r){r=r||{};var o=this.selector,s=a.jMaskGlobals,i=s.watchInterval,c=r.watchInputs||s.watchInputs,l=function(){if(n(this,t,r))return a(this).data("mask",new e(this,t,r))};return a(this).each(l),o&&""!==o&&c&&(clearInterval(a.maskWatchers[o]),a.maskWatchers[o]=setInterval(function(){a(document).find(o).each(l)},i)),this},a.fn.masked=function(a){return this.data("mask").getMaskedVal(a)},a.fn.unmask=function(){return clearInterval(a.maskWatchers[this.selector]),delete a.maskWatchers[this.selector],this.each(function(){var e=a(this).data("mask");e&&e.remove().removeData("mask")})},a.fn.cleanVal=function(){return this.data("mask").getCleanVal()},a.applyDataMask=function(e){e=e||a.jMaskGlobals.maskElements;var n=e instanceof a?e:a(e);n.filter(a.jMaskGlobals.dataMaskAttr).each(t)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:r("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};a.jMaskGlobals=a.jMaskGlobals||{},o=a.jMaskGlobals=a.extend(!0,{},o,a.jMaskGlobals),o.dataMask&&a.applyDataMask(),setInterval(function(){a.jMaskGlobals.watchDataMask&&a.applyDataMask()},o.watchInterval)}),$(function(){searchZipcode("#cep_entrega","#endereco_entrega","#cidade_entrega","#estado_entrega","#complemento_entrega","#complemento_entrega"),searchZipcode("#cep_solicitante","#endereco_solicitante","#cidade_solicitante","#estado_solicitante","#complemento_solicitante","#complemento_solicitante"),initMasks(),$("#check_same_address").on("click",function(){var a=$("#can-disable-by-checkbox");a.hasClass("disabled")?(a.removeClass("disabled"),$("#cep_entrega, #endereco_entrega, #cidade_entrega, #estado_entrega, #complemento_entrega").removeAttr("disabled")):(a.addClass("disabled"),$("#cep_entrega, #endereco_entrega, #cidade_entrega, #estado_entrega, #complemento_entrega").attr("disabled","disabled"))}),initNewInsuranceFormEvent(),$("#modal-form-show").on("click",function(a){a.preventDefault()}),$("#task-form").on("submit",function(a){a.preventDefault(),$(".required").each(function(a,e){var t=$(this).attr("id");$(this).attr("disabled")||""!=$(this).val()?($(this).removeClass("has-error"),$("#"+t+"_invalido").html("")):($(this).addClass("has-error"),$("#"+t+"_invalido").html("Campo Obrigatório"))})}),$(".required").on("blur",function(){var a=$(this);""==a.val()?a.addClass("has-error"):a.removeClass("has-error")})});var searchZipcode=function(a,e,t,n,r,o){$(a).on("blur",function(){var s=$(a);if(s.val().length>=8){var i="https://viacep.com.br/ws/"+s.val()+"/json/";$.get(i,function(a){$(e).val(a.logradouro),$(t).val(a.localidade),$(n).val(a.uf),$(r).val(a.complemento),$(o).focus(),console.log(a)})}})},initMasks=function(){$("#cep_entrega, #cep_solicitante").mask("00000-000",{clearIfNotMatch:!0}),$("#cpf_solicitante").mask("000.000.000-00",{clearIfNotMatch:!0}),$("#telefone_solicitante").mask("(00) 0000-00009",{clearIfNotMatch:!0})},initNewInsuranceFormEvent=function(){$("#add-new-insurance").on("click",function(a){var e=$("#marca_insumo"),t=$("#preco_insumo"),n=$("#quantidade_insumo"),r=$("#descricao_insumo"),o=!1;if(validateLength(e.val(),2,50)||(e.addClass("has-error"),$("#marca_insumo_invalido").html("Preencha o campo com no mínimo 2 caracteres e no máximo 50"),o=!0),validateNumber(t.val())||(t.addClass("has-error"),$("#preco_insumo_invalido").html("Número inválido"),o=!0),validateInt(n.val())||(n.addClass("has-error"),$("#quantidade_insumo_invalido").html("Número inválido"),o=!0),validateLength(r.val(),3,255)||(r.addClass("has-error"),$("#descricao_insumo_invalido").html("Preencha o campo com no mínimo 3 caracteres e no máximo 255"),o=!0),!o){var s="",i=$("#can-add-insurance tr:last-child").data("index")+1;s+=createElement("td",e.val()+createHiddenInput("insumo["+i+"][marca]",e.val())),s+=createElement("td",r.val()+createHiddenInput("insumo["+i+"][descricao]",r.val())),s+=createElement("td",n.val()+createHiddenInput("insumo["+i+"][quantidade]",n.val())),s+=createElement("td",t.val()+createHiddenInput("insumo["+i+"][preco]",t.val()));var c="<tr data-index='"+i+"'>"+s+"</tr>";return $("#can-add-insurance").append(c),$("#new-insurance-modal .close").click(),e.val(""),t.val(""),n.val(""),r.val(""),!0}return!1})};